/* Frontend/src/Login.css */

/* Center the form on the screen */
.login-container {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background-color: #343541; /* Main background */
  font-family: 'Inter', sans-serif;
}

/* The Card holding the form */
.login-card {
  background-color: #202123; /* Darker card background */
  padding: 40px;
  border-radius: 8px;
  width: 100%;
  max-width: 400px;
  text-align: center;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.login-title {
  color: #ececf1;
  margin-bottom: 24px;
  font-size: 32px;
  font-weight: 700;
}

/* Tabs (Email vs Phone) */
.login-tabs {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 25px;
  border-bottom: 1px solid #4d4d4f;
  padding-bottom: 10px;
}

.tab {
  color: #8e8ea0;
  cursor: pointer;
  font-weight: 600;
  padding-bottom: 5px;
  transition: color 0.2s;
}

.tab:hover {
  color: #ececf1;
}

.tab.active {
  color: #10a37f; /* Active Green */
  border-bottom: 2px solid #10a37f;
}

/* Inputs */
.login-form {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.login-input {
  padding: 14px;
  border-radius: 6px;
  border: 1px solid #565869;
  background-color: #40414f; /* Input background */
  color: white;
  font-size: 16px;
  outline: none;
  transition: border-color 0.2s;
}

.login-input:focus {
  border-color: #10a37f; /* Highlight green on focus */
}

/* Buttons */
.login-btn {
  padding: 14px;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 600;
  color: white;
  cursor: pointer;
  transition: opacity 0.2s;
}

.login-btn:hover {
  opacity: 0.9;
}

.btn-primary { background-color: #10a37f; } /* ChatGPT Green */
.btn-google { background-color: #4285f4; }  /* Google Blue */

/* Divider */
.divider {
  margin: 20px 0;
  color: #8e8ea0;
  font-size: 12px;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 10px;
}

.divider::before, .divider::after {
  content: "";
  flex: 1;
  height: 1px;
  background-color: #565869;
}

/* Error & Toggle Text */
.error-msg {
  color: #ff4a4a;
  background: rgba(255, 74, 74, 0.1);
  padding: 10px;
  border-radius: 4px;
  font-size: 14px;
  margin-bottom: 15px;
}

.toggle-text {
  margin-top: 20px;
  color: #ececf1;
  font-size: 14px;
}

.toggle-link {
  color: #10a37f;
  cursor: pointer;
  margin-left: 5px;
  text-decoration: underline;
}


import "./Sidebar.css";
import axios from "axios"; // Make sure axios is imported

// 1. Keep your existing props
function Sidebar({ user, onLogout, threadList, onSelectThread, onNewChat, activeThreadId, isFree }) {

  // 2. Add this NEW function inside the component
  const handlePayment = async () => {
    try {
      // A. Create Order
      const { data: order } = await axios.post("http://localhost:5000/api/create-order");

      // B. Razorpay Options
      const options = {
        key: "rzp_test_YOUR_KEY_HERE", // ðŸ”´ PASTE YOUR KEY ID HERE
        amount: order.amount,
        currency: order.currency,
        name: "ChatGPT Clone Pro",
        description: "Test Transaction",
        order_id: order.id,
        handler: async function (response) {
          // C. Verify on Backend
          const verifyRes = await axios.post("http://localhost:5000/api/verify-payment", {
            razorpay_order_id: response.razorpay_order_id,
            razorpay_payment_id: response.razorpay_payment_id,
            razorpay_signature: response.razorpay_signature,
            userId: user.uid,
          });

          if (verifyRes.data.success) {
            alert("Upgrade Successful! Refreshing...");
            window.location.reload(); // Reloads page to remove the button
          }
        },
        prefill: {
          name: user.displayName || "User",
          email: user.email,
          contact: "9999999999"
        },
        theme: { color: "#10a37f" },
      };

      const rzp = new window.Razorpay(options);
      rzp.open();
    } catch (error) {
      console.error("Payment failed", error);
      alert("Something went wrong. Check console.");
    }
  };

  return (
    <div className="sidebar">
      {/* ... Your Top Section ... */}
      {/* ... Your Thread List ... */}

      {/* 3. UPDATE YOUR EXISTING BUTTON */}
      {isFree && (
        <div style={{ padding: "10px", borderTop: "1px solid #444", marginBottom: "10px" }}>
          <button 
            onClick={handlePayment} // ðŸ‘ˆ ATTACH THE FUNCTION HERE
            style={{ 
              width: "100%", padding: "10px", 
              background: "linear-gradient(90deg, #f093fb 0%, #f5576c 100%)", 
              border: "none", borderRadius: "5px", color: "white", fontWeight: "bold", cursor: "pointer" 
            }}
          >
            âœ¨ Upgrade to Pro
          </button>
        </div>
      )}

      {/* ... Your Bottom Section ... */}
    </div>
  );
}

export default Sidebar;